---
title: "Video: Token Gated Chat"
---

Watch Calum build an NFT-gated chat app with Polybase from scratch.

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/YzPfCLQBGTI" title="Build an NFT Gated Chat App using Polybase | Tutorial by Calum" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

## Deployed app

View a deployed version of the app:
[Token gated chat app](https://chat-polybase.vercel.app/)

## Code

View the code on Github:
[Token gated chat app](https://github.com/polybase/chat)


## Schema

```js
@public
collection User {
  id: string;

  @delegate
  @read
  publicKey: PublicKey;

  constructor () {
    if (!ctx.publicKey) {
      error('You must sign the txn');
    }
    this.id = ctx.publicKey.toHex(); // 0x...
    this.publicKey = ctx.publicKey;
  }
}

@read
collection NFT {
  id: string;

  @delegate
  @read
  owner: User;

  constructor (id: string, owner: User) {
    this.id = id;
    this.owner = owner;
  }
}

collection Chat {
  id: string;
  name: string;
  
  @delegate
  @read
  members: NFT[];

  constructor (id: string, name: string) {
    this.id = id;
    this.name = name;
    this.members = [];
  }

  @call(members)
  addMember (nft: NFT) {
    if (this.members.length > 5) {
      error('Too many people in the room');
    }

    this.members.push(nft);
  }

  @call(members)
  setName (name: string) {
    this.name = name;
  }
}

collection Message {
  id: string;
  message: string;
  timestamp: number;

  @read
  chat: Chat;

  constructor (id: string, message: string, timestamp: number, chat: Chat) {
    this.id = id;
    this.message = message;
    this.timestamp = timestamp;
    this.chat = chat;
  }
}
```